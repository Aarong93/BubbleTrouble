<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="assets/canvas.css">
    <title>Poke Trouble</title>
  </head>
  <body>
    <h1>Poke Trouble</h1>
    <h2>
      Help Pikachu escape capture!<br>
      Use the right and left arrow key to move back and forth.
      Press space to zap pokeballs!
    </h2>
    <script src="lib/bubble.js"></script>
    <script src="lib/game.js"></script>
    <script src="lib/gameview.js"></script>
    <script src="lib/char.js"></script>
    <script src="lib/shot.js"></script>

    <form id="select-mode"><span id="form-header">Pick a Game Mode</span><br>
      <p id="survival-label">Survival</p>
      <input type="radio" id="survival" value="survival" name="mode" label="Survival" checked></input>
      <p id="classic-label">Classic</p>
      <input type="radio" id="classic" name="mode" value="classic" label="Classic"></input>
      <h3 id="survival-mode-description">Break as many pokeballs as you can before you get caught</h3>
      <h3 id="classic-mode-description">Break all the pokeballs to escape!</h3>
    </form>

    <canvas id="canvas" width="700" height="450"></canvas>

    <div id="score">Popped: 0</div>
    <div id="lost-message">You Got Caught!</div>
    <div id="won-message">You Escaped!</div>
    <div id="new-game-button">Start a new game</div>
    <div id="play-again">Press S to play again</div>

    <img id="pika" class="hide" src="pika.png"></img>
    <img id="lightning" class="hide" src="lightning.png"></img>
    <img id="pokeball" class="hide" src="pokeball.png"><img>

    <script>
      $(function() {
        $("#classic-mode-description").hide();
        $("#survival").bind("click", function (e) {
          e.stopPropagation();
          $("#classic-mode-description").hide();
          $("#survival-mode-description").show();
        });
        $("#classic").bind("click", function (e) {
          e.stopPropagation();
          $("#survival-mode-description").hide();
          $("#classic-mode-description").show();
        });
        $("lost-message").hide();
        var canvas = document.getElementById('canvas');
        var c = canvas.getContext('2d');
        var game = new BubbleTrouble.Game();
        var gameView = new BubbleTrouble.GameView(game, c);
        $("#new-game-button").bind("click" , function() {
          game.restart();
          if (!gameView.running) {
            gameView.start(c);
          }
        });
      });
    </script>

  </body>
</html>
